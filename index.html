<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Portfolio Posters</title>
  <style>
    :root { --bg:#0b0d13; --fg:#eef2f8; --muted:#aab4c8; --panel:#111522; --border:#1a2130; }
    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body { margin:0; font-family: ui-sans-serif, -apple-system, Segoe UI, Roboto, Arial, sans-serif; background: var(--bg); color: var(--fg); }

    h1 { text-align:center; padding:20px 16px; margin:0; font-weight:700; }

    /* Base grid: 3â†’2 columns with auto-fit, then 1 column */
    .grid {
      display:grid;
      grid-template-columns:repeat(auto-fit, minmax(280px, 1fr));
      gap:16px;
      padding:18px 16px 40px;
      max-width:1200px;
      margin:0 auto;
    }

    /* Cards */
    .card {
      position:relative;
      cursor:pointer;
      background:var(--panel);
      border:1px solid var(--border);
      border-radius:10px;
      overflow:hidden;
      transition:transform .2s ease, box-shadow .2s ease;
    }
    .card:hover { transform: translateY(-2px); box-shadow: 0 10px 30px rgba(0,0,0,.35); }
    .card img { width:100%; height:auto; display:block; aspect-ratio: 9/13; object-fit:cover; }

    /* Lightbox */
    .lightbox { position:fixed; inset:0; background:rgba(0,0,0,.88);
      display:none; align-items:center; justify-content:center; z-index:1000; }
    .lightbox.open { display:flex; }
    .lightbox-surface { width:min(1600px, 98vw); max-height:96vh; display:flex; flex-direction:column; }
    .lightbox-content { display:flex; align-items:center; justify-content:center; padding:10px 10px 10px; }
    .lightbox-content iframe, .lightbox-content img {
      width:min(1400px, 98vw);
      aspect-ratio:16/9;
      height:auto;
      max-height:92vh;
      border:0;
      border-radius:10px;
      background:#000;
      display:block;
    }
    .lightbox-bar { display:flex; justify-content:center; padding:6px 0 14px; }
    .close { appearance:none; background:#111523; border:1px solid #263048; color:var(--fg);
      border-radius:8px; padding:8px 16px; cursor:pointer; font-size:16px; }
    .close:hover { background:#161b2a; }

    /* Breakpoints */
    @media (max-width: 1100px) {
      .grid { grid-template-columns: repeat(2, minmax(0,1fr)); }
    }
    @media (max-width: 640px) {
      .grid { grid-template-columns: 1fr; }
      .card { width: 50%; margin: 0 auto; } /* 1-column: show cards at 50% width */
      h1 { font-size: 1.25rem; }
      .lightbox-surface{ width:100vw; max-height:98vh; }
      .lightbox-content iframe { width:100vw; max-height:94vh; border-radius:0; }
    }
  </style>
</head>
<body>
  <h1>Animated Film Posters</h1>

  <div class="grid" id="grid">
    <!-- Replace data-video values with your YouTube/Vimeo links as needed -->
    <div class="card" data-video="https://player.vimeo.com/video/905584986">
      <img src="assets/posters/poster01.jpg" alt="Poster 1" loading="lazy">
    </div>
    <div class="card" data-video="https://youtu.be/TbQm5doF_Uc">
      <img src="assets/posters/poster02.jpg" alt="Poster 2" loading="lazy">
    </div>
    <div class="card" data-video="https://www.youtube.com/watch?v=TEHWDA_6e3M">
      <img src="assets/posters/poster03.jpg" alt="Poster 3" loading="lazy">
    </div>
    <div class="card" data-video="https://www.youtube.com/embed/CZ1CATNbXg0">
      <img src="assets/posters/poster04.jpg" alt="Poster 4" loading="lazy">
    </div>
    <div class="card" data-video="https://www.youtube.com/watch?v=ORFWdXl_zJ4">
      <img src="assets/posters/poster05.jpg" alt="Poster 5" loading="lazy">
    </div>
    <div class="card" data-video="https://www.youtube.com/watch?v=JcpWXaA2qeg">
      <img src="assets/posters/poster06.jpg" alt="Poster 6" loading="lazy">
    </div>
    <div class="card" data-video="https://vimeo.com/76979871">
      <img src="assets/posters/poster07.jpg" alt="Poster 7" loading="lazy">
    </div>
    <div class="card" data-video="https://www.youtube.com/shorts/tg52up16eq0">
      <img src="assets/posters/poster08.jpg" alt="Poster 8" loading="lazy">
    </div>
    <div class="card" data-video="https://www.youtube.com/watch?v=yRUAzGQ3nSY">
      <img src="assets/posters/poster09.jpg" alt="Poster 9" loading="lazy">
    </div>
  </div>

  <!-- Lightbox with 'close' at bottom -->
  <div class="lightbox" id="lightbox" aria-hidden="true">
    <div class="lightbox-surface" role="dialog" aria-modal="true" aria-label="Video preview">
      <div class="lightbox-content" id="lightbox-content"></div>
      <div class="lightbox-bar">
        <button class="close" id="lbClose" aria-label="Close">close</button>
      </div>
    </div>
  </div>

  <script>
    const grid = document.getElementById('grid');
    const lightbox = document.getElementById('lightbox');
    const lightboxContent = document.getElementById('lightbox-content');
    const lbClose = document.getElementById('lbClose');

    function toYouTubeEmbed(urlOrId){
      if(!urlOrId) return null;
      try{
        const u = new URL(urlOrId);
        if(u.hostname.includes('youtu.be')){
          const id = u.pathname.replace('/','').split(/[?&#]/)[0];
          return 'https://www.youtube.com/embed/' + id;
        }
        if(u.hostname.includes('youtube.com')){
          if(u.pathname.includes('/watch') && u.searchParams.get('v')){
            return 'https://www.youtube.com/embed/' + u.searchParams.get('v');
          }
          if(u.pathname.includes('/shorts/')){
            const id = u.pathname.split('/shorts/')[1].split(/[?&#]/)[0];
            return 'https://www.youtube.com/embed/' + id;
          }
          if(u.pathname.includes('/embed/')) return urlOrId;
        }
      }catch(e){
        return 'https://www.youtube.com/embed/' + urlOrId;
      }
      return urlOrId;
    }

    function toVimeoEmbed(url){
      try{
        const u = new URL(url);
        if(u.hostname.includes('vimeo.com')){
          if(u.hostname === 'player.vimeo.com'){
            return url;
          } else {
            const id = u.pathname.split('/').filter(Boolean)[0];
            return 'https://player.vimeo.com/video/' + id;
          }
        }
      }catch(e){}
      return url;
    }

    function normalizeEmbed(url){
      if(!url) return null;
      const lc = url.toLowerCase();
      if(lc.includes('youtube.com') || lc.includes('youtu.be')) return toYouTubeEmbed(url);
      if(lc.includes('vimeo.com')) return toVimeoEmbed(url);
      return url;
    }

    function openLightbox(raw){
      const embed = normalizeEmbed(raw);
      let src = embed || '';
      if(src){
        const params = [
          'autoplay=1',
          'rel=0',
          'modestbranding=1',
          'playsinline=1',
          'title=0',
          'byline=0',
          'portrait=0'
        ].join('&');
        src += (src.includes('?') ? '&' : '?') + params;
      }
      lightboxContent.innerHTML = '<iframe src="'+src+'" allow="autoplay; fullscreen; picture-in-picture" allowfullscreen></iframe>';
      lightbox.classList.add('open');
      document.documentElement.style.overflow = 'hidden';
      document.body.style.overflow = 'hidden';
    }

    function closeLightbox(){
      lightbox.classList.remove('open');
      lightboxContent.innerHTML = '';
      document.documentElement.style.overflow = '';
      document.body.style.overflow = '';
    }

    grid.addEventListener('click', (e)=>{
      const card = e.target.closest('.card');
      if(!card) return;
      openLightbox(card.getAttribute('data-video'));
    });

    lbClose.addEventListener('click', closeLightbox);
    lightbox.addEventListener('click', (e)=>{ if(e.target === lightbox) closeLightbox(); });
    window.addEventListener('keydown', (e)=>{
      if(!lightbox.classList.contains('open')) return;
      if(e.key === 'Escape') closeLightbox();
    });
  </script>
</body>
</html>
